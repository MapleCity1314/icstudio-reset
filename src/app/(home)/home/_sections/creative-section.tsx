'use client';

import { useEffect, useRef } from 'react';
import { ArrowRight } from 'lucide-react';
import { Button } from '@/components/ui/button';
import gsap from 'gsap';
import { ScrollTrigger } from 'gsap/ScrollTrigger';
import TextPressure from '@/components/anime/TextPressure/TextPressure';
import Magnet from '@/components/anime/Magnet/Magnet';
import GridDistortion from '@/components/anime/GridDistortion/GridDistortion';

// 确保GSAP插件只注册一次
if (typeof window !== 'undefined') {
      gsap.registerPlugin(ScrollTrigger);
}

// 技术栈图标
const TechIcons = {
      vue: () => (
            <svg width="40" height="40" viewBox="0 0 261.76 226.69" xmlns="http://www.w3.org/2000/svg">
                  <path d="M161.096.001l-30.225 52.351L100.647.001H-.005l130.877 226.688L261.749.001z" fill="#41b883" />
                  <path d="M161.096.001l-30.225 52.351L100.647.001H52.346l78.526 136.01L209.398.001z" fill="#34495e" />
            </svg>
      ),
      react: () => (
            <svg width="40" height="40" viewBox="0 0 841.9 595.3" xmlns="http://www.w3.org/2000/svg">
                  <g fill="#61dafb">
                        <path d="M666.3 296.5c0-32.5-40.7-63.3-103.1-82.4 14.4-63.6 8-114.2-20.2-130.4-6.5-3.8-14.1-5.6-22.4-5.6v22.3c4.6 0 8.3.9 11.4 2.6 13.6 7.8 19.5 37.5 14.9 75.7-1.1 9.4-2.9 19.3-5.1 29.4-19.6-4.8-41-8.5-63.5-10.9-13.5-18.5-27.5-35.3-41.6-50 32.6-30.3 63.2-46.9 84-46.9V78c-27.5 0-63.5 19.6-99.9 53.6-36.4-33.8-72.4-53.2-99.9-53.2v22.3c20.7 0 51.4 16.5 84 46.6-14 14.7-28 31.4-41.3 49.9-22.6 2.4-44 6.1-63.6 11-2.3-10-4-19.7-5.2-29-4.7-38.2 1.1-67.9 14.6-75.8 3-1.8 6.9-2.6 11.5-2.6V78.5c-8.4 0-16 1.8-22.6 5.6-28.1 16.2-34.4 66.7-19.9 130.1-62.2 19.2-102.7 49.9-102.7 82.3 0 32.5 40.7 63.3 103.1 82.4-14.4 63.6-8 114.2 20.2 130.4 6.5 3.8 14.1 5.6 22.5 5.6 27.5 0 63.5-19.6 99.9-53.6 36.4 33.8 72.4 53.2 99.9 53.2 8.4 0 16-1.8 22.6-5.6 28.1-16.2 34.4-66.7 19.9-130.1 62-19.1 102.5-49.9 102.5-82.3zm-130.2-66.7c-3.7 12.9-8.3 26.2-13.5 39.5-4.1-8-8.4-16-13.1-24-4.6-8-9.5-15.8-14.4-23.4 14.2 2.1 27.9 4.7 41 7.9zm-45.8 106.5c-7.8 13.5-15.8 26.3-24.1 38.2-14.9 1.3-30 2-45.2 2-15.1 0-30.2-.7-45-1.9-8.3-11.9-16.4-24.6-24.2-38-7.6-13.1-14.5-26.4-20.8-39.8 6.2-13.4 13.2-26.8 20.7-39.9 7.8-13.5 15.8-26.3 24.1-38.2 14.9-1.3 30-2 45.2-2 15.1 0 30.2.7 45 1.9 8.3 11.9 16.4 24.6 24.2 38 7.6 13.1 14.5 26.4 20.8 39.8-6.3 13.4-13.2 26.8-20.7 39.9zm32.3-13c5.4 13.4 10 26.8 13.8 39.8-13.1 3.2-26.9 5.9-41.2 8 4.9-7.7 9.8-15.6 14.4-23.7 4.6-8 8.9-16.1 13-24.1zM421.2 430c-9.3-9.6-18.6-20.3-27.8-32 9 .4 18.2.7 27.5.7 9.4 0 18.7-.2 27.8-.7-9 11.7-18.3 22.4-27.5 32zm-74.4-58.9c-14.2-2.1-27.9-4.7-41-7.9 3.7-12.9 8.3-26.2 13.5-39.5 4.1 8 8.4 16 13.1 24 4.7 8 9.5 15.8 14.4 23.4zM420.7 163c9.3 9.6 18.6 20.3 27.8 32-9-.4-18.2-.7-27.5-.7-9.4 0-18.7.2-27.8.7 9-11.7 18.3-22.4 27.5-32zm-74 58.9c-4.9 7.7-9.8 15.6-14.4 23.7-4.6 8-8.9 16-13 24-5.4-13.4-10-26.8-13.8-39.8 13.1-3.1 26.9-5.8 41.2-7.9zm-90.5 125.2c-35.4-15.1-58.3-34.9-58.3-50.6 0-15.7 22.9-35.6 58.3-50.6 8.6-3.7 18-7 27.7-10.1 5.7 19.6 13.2 40 22.5 60.9-9.2 20.8-16.6 41.1-22.2 60.6-9.9-3.1-19.3-6.5-28-10.2zM310 490c-13.6-7.8-19.5-37.5-14.9-75.7 1.1-9.4 2.9-19.3 5.1-29.4 19.6 4.8 41 8.5 63.5 10.9 13.5 18.5 27.5 35.3 41.6 50-32.6 30.3-63.2 46.9-84 46.9-4.5-.1-8.3-1-11.3-2.7zm237.2-76.2c4.7 38.2-1.1 67.9-14.6 75.8-3 1.8-6.9 2.6-11.5 2.6-20.7 0-51.4-16.5-84-46.6 14-14.7 28-31.4 41.3-49.9 22.6-2.4 44-6.1 63.6-11 2.3 10.1 4.1 19.8 5.2 29.1zm38.5-66.7c-8.6 3.7-18 7-27.7 10.1-5.7-19.6-13.2-40-22.5-60.9 9.2-20.8 16.6-41.1 22.2-60.6 9.9 3.1 19.3 6.5 28.1 10.2 35.4 15.1 58.3 34.9 58.3 50.6-.1 15.7-23 35.6-58.4 50.6zM320.8 78.4z" />
                        <circle cx="420.9" cy="296.5" r="45.7" />
                        <path d="M520.5 78.1z" />
                  </g>
            </svg>
      ),
      nextjs: () => (
            <svg width="40" height="40" viewBox="0 0 394 80" xmlns="http://www.w3.org/2000/svg">
                  <path
                        fill="#000"
                        d="M262 0h68.5v12.7h-27.2v66.6h-13.6V12.7H262V0ZM149 0v12.7H94v20.4h44.3v12.6H94v21h55v12.6H80.5V0h68.7zm34.3 0h-17.8l63.8 79.4h17.9l-32-39.7 32-39.6h-17.9l-23 28.6-23-28.6zm18.3 56.7-9-11-27.1 33.7h17.8l18.3-22.7z"
                  />
                  <path
                        fill="#000"
                        d="M81 79.3 17 0H0v79.3h13.6V17l50.2 62.3H81Zm252.6-.4c-1 0-1.8-.4-2.5-1s-1.1-1.6-1.1-2.6.3-1.8 1-2.5 1.6-1 2.6-1 1.8.3 2.5 1a3.4 3.4 0 0 1 .6 4.3 3.7 3.7 0 0 1-3 1.8zm23.2-33.5h6v23.3c0 2.1-.4 4-1.3 5.5a9.1 9.1 0 0 1-3.8 3.5c-1.6.8-3.5 1.3-5.7 1.3-2 0-3.7-.4-5.3-1s-2.8-1.8-3.7-3.2c-.9-1.3-1.4-3-1.4-5h6c.1.8.3 1.6.7 2.2s1 1.2 1.6 1.5c.7.4 1.5.5 2.4.5 1 0 1.8-.2 2.4-.6a4 4 0 0 0 1.6-1.8c.3-.8.5-1.8.5-3V45.5zm30.9 9.1a4.4 4.4 0 0 0-2-3.3 7.5 7.5 0 0 0-4.3-1.1c-1.3 0-2.4.2-3.3.5-.9.4-1.6 1-2 1.6a3.5 3.5 0 0 0-.3 4c.3.5.7.9 1.3 1.2l1.8 1 2 .5 3.2.8c1.3.3 2.5.7 3.7 1.2a13 13 0 0 1 3.2 1.8 8.1 8.1 0 0 1 3 6.5c0 2-.5 3.7-1.5 5.1a10 10 0 0 1-4.4 3.5c-1.8.8-4.1 1.2-6.8 1.2-2.6 0-4.9-.4-6.8-1.2-2-.8-3.4-2-4.5-3.5a10 10 0 0 1-1.7-5.6h6a5 5 0 0 0 3.5 4.6c1 .4 2.2.6 3.4.6 1.3 0 2.5-.2 3.5-.6 1-.4 1.8-1 2.4-1.7a4 4 0 0 0 .8-2.4c0-.9-.2-1.6-.7-2.2a11 11 0 0 0-2.1-1.4l-3.2-1-3.8-1c-2.8-.7-5-1.7-6.6-3.2a7.2 7.2 0 0 1-2.4-5.7 8 8 0 0 1 1.7-5 10 10 0 0 1 4.3-3.5c2-.8 4-1.2 6.4-1.2 2.3 0 4.4.4 6.2 1.2 1.8.8 3.2 2 4.3 3.4 1 1.4 1.5 3 1.5 5h-5.8z"
                  />
            </svg>
      ),
      django: () => (
            <svg width="40" height="40" viewBox="0 0 104 36" version="1.1" xmlns="http://www.w3.org/2000/svg">
                  <title>logo-django</title>
                  <defs></defs>
                  <g id="Page-1" stroke="none" strokeWidth="1" fill="none" fillRule="evenodd">
                        <g id="logo-django" transform="translate(-8.000000, -5.000000)" fill="#FFFFFF">
                              <path
                                    d="M20.2602817,5 L25.9509859,5 L25.9509859,31.0824248 C23.0360563,31.6338042 20.8901408,31.8507285 18.5684507,31.8507285 C11.6180282,31.8434735 8,28.7383366 8,22.7747325 C8,17.0287781 11.8377465,13.2997118 17.7847887,13.2997118 C18.7076056,13.2997118 19.4107042,13.3722617 20.2602817,13.5899115 L20.2602817,5 L20.2602817,5 Z M20.2602817,18.1242821 C19.5938028,17.9066323 19.044507,17.8340823 18.3414085,17.8340823 C15.4630986,17.8340823 13.8005634,19.5897906 13.8005634,22.6666331 C13.8005634,25.6622196 15.3898592,27.316358 18.3047887,27.316358 C18.9346479,27.316358 19.4473239,27.2808085 20.2602817,27.1719836 L20.2602817,18.1242821 L20.2602817,18.1242821 Z M34.9960563,13.6987364 L34.9960563,26.7577235 C34.9960563,31.2550936 34.6591549,33.417807 33.6704225,35.2823401 C32.7476056,37.0750489 31.531831,38.2053768 29.0197183,39.453961 L23.7391549,36.9654985 C26.2512676,35.7981701 27.4670423,34.7665101 28.2433803,33.1921767 C29.056338,31.5822938 29.3126761,29.7177606 29.3126761,24.8133855 L29.3126761,13.6987364 L34.9960563,13.6987364 Z M29.3126761,5.02901997 L35.0033803,5.02901997 L35.0033803,10.8112493 L29.3126761,10.8112493 L29.3126761,5.02901997 Z M38.4302535,14.9828702 C40.9430986,13.8148163 43.3453521,13.2997118 45.9673239,13.2997118 C48.8895775,13.2997118 50.8077183,14.0687411 51.6580282,15.5705246 C52.1340845,16.4121037 52.2878873,17.5076077 52.2878873,19.8509704 L52.2878873,31.2993491 C49.7398873,31.6620987 46.5239437,31.922553 44.1649014,31.922553 C39.3970141,31.922553 37.2584225,30.2756696 37.2584225,26.6198787 C37.2584225,22.6659076 40.1008451,20.8376494 47.079831,20.2565245 L47.079831,19.0159207 C47.079831,17.9929667 46.559831,17.6229621 45.124338,17.6229621 C43.0223662,17.6229621 40.6567324,18.2106165 38.4375775,19.3423954 L38.4302535,14.9828702 Z M47.336169,23.9420608 C43.571662,24.3048105 42.3485634,24.8931904 42.3485634,26.3579734 C42.3485634,27.4549284 43.051662,27.9693073 44.604338,27.9693073 C45.4539155,27.9693073 46.2302535,27.8967574 47.3354366,27.7153826 L47.3354366,23.9420608 L47.336169,23.9420608 Z M55.056338,14.5765906 C58.4180282,13.6987364 61.1857465,13.2997118 63.9908169,13.2997118 C66.9057465,13.2997118 69.0157746,13.9599162 70.2674366,15.2367949 C71.4458592,16.4411237 71.8208451,17.7615324 71.8208451,20.5764696 L71.8208451,31.6258237 L66.1294085,31.6258237 L66.1294085,20.8013744 C66.1294085,18.6393866 65.3896901,17.8340823 63.3616901,17.8340823 C62.5846197,17.8340823 61.8822535,17.9066323 60.7397183,18.2403619 L60.7397183,31.6265492 L55.056338,31.6265492 L55.056338,14.5765906 Z M74.0326761,34.7012152 C76.0240563,35.7241692 78.0169014,36.1964692 80.1261972,36.1964692 C83.8540845,36.1964692 85.4433803,34.6946857 85.4433803,31.1107193 L85.4433803,31.0018944 C84.3374648,31.5460188 83.223493,31.7716491 81.7513803,31.7716491 C76.764507,31.7716491 73.5932394,28.5141573 73.5932394,23.3558574 C73.5932394,16.9496987 78.2878873,13.3294573 86.5932394,13.3294573 C89.0321127,13.3294573 91.2878873,13.583382 94.0189859,14.1347615 L92.0708169,18.1975575 C90.5562254,17.9073578 91.9463099,18.1540275 90.804507,18.0452026 L90.804507,18.6328571 L90.8777465,21.0124947 L90.9136338,24.0886117 C90.9509859,24.8583664 90.9509859,25.6259447 90.988338,26.3956994 L90.988338,27.9330324 C90.988338,32.7648576 90.5774648,35.0291409 89.3616901,36.900929 C87.5892958,39.6425908 84.5212958,41 80.1620845,41 C77.943662,41 76.0240563,40.6727998 74.0326761,39.9030451 L74.0326761,34.7012152 L74.0326761,34.7012152 Z M85.3335211,17.8703573 L85.1504225,17.8703573 L84.7395493,17.8703573 C83.6336338,17.8340823 82.3380282,18.1242821 81.4510986,18.6756615 C80.0895775,19.4446908 79.3872113,20.8376494 79.3872113,22.8110074 C79.3872113,25.6252192 80.7934085,27.2365531 83.3055211,27.2365531 C84.0811268,27.2365531 84.7117183,27.0921787 85.4441127,26.8738034 L85.4441127,26.4667983 L85.4441127,24.9294653 C85.4441127,24.269261 85.4067606,23.5365067 85.4067606,22.7674775 L85.3708732,20.17019 L85.3335211,18.3056569 L85.3335211,17.8703573 Z M102.84507,13.2271619 C108.528451,13.2271619 112,16.7748534 112,22.5208077 C112,28.4118619 108.382704,32.1039278 102.617296,32.1039278 C96.9265915,32.1039278 93.4176901,28.5569618 93.4176901,22.8480079 C93.4272113,16.9199532 97.044507,13.2271619 102.84507,13.2271619 Z M102.727887,27.5623023 C104.910423,27.5623023 106.199437,25.7710445 106.199437,22.6586526 C106.199437,19.5825356 104.94631,17.7542774 102.765239,17.7542774 C100.509465,17.7542774 99.2189859,19.5462607 99.2189859,22.6586526 C99.2189859,25.7710445 100.516056,27.5623023 102.727887,27.5623023 L102.727887,27.5623023 Z M102.727887,27.5623023"
                                    id="Shape"
                              ></path>
                        </g>
                  </g>
            </svg>
      ),
      tauri: () => (
            <svg width="40" height="40" viewBox="0 0 210 234" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <path
                        d="M146.34 85.6102C146.34 97.9524 136.271 107.958 123.85 107.958C111.429 107.958 101.36 97.9524 101.36 85.6102C101.36 73.2681 111.429 63.2628 123.85 63.2628C136.271 63.2628 146.34 73.2681 146.34 85.6102Z"
                        stroke="white"
                  />
                  <path
                        d="M108.64 148.39C108.64 160.732 98.5708 170.737 86.1499 170.737C73.729 170.737 63.6599 160.732 63.6599 148.39C63.6599 136.048 73.729 126.042 86.1499 126.042C98.5708 126.042 108.64 136.048 108.64 148.39Z"
                        stroke="white"
                  />
                  <path
                        d="M69.0134 65.4936C30.2 73.3739 1 107.493 1 148.39C1 195.119 39.1229 233 86.1499 233C124.358 233 156.689 207.994 167.471 173.554C157.292 178.538 146.275 181.765 134.897 183.039C124.023 198.116 106.241 207.94 86.1499 207.94C53.0515 207.94 26.22 181.278 26.22 148.39C26.22 122.701 42.5902 100.811 65.5305 92.4581C64.5999 83.3843 65.7609 74.1388 69.0134 65.4936Z"
                        stroke="white"
                  />
                  <path
                        fillRule="evenodd"
                        clipRule="evenodd"
                        d="M140.986 168.506C179.8 160.626 209 126.507 209 85.6102C209 38.8813 170.877 1 123.85 1C85.6418 1 53.3113 26.006 42.5294 60.4465C52.708 55.4618 63.7247 52.2348 75.1035 50.9613C85.9768 35.884 103.759 26.0601 123.85 26.0601C156.948 26.0601 183.78 52.7216 183.78 85.6102C183.78 111.3 167.41 133.19 144.469 141.542C145.4 150.616 144.239 159.861 140.986 168.506Z"
                        stroke="white"
                  />
            </svg>
      ),
      electron: () => (
            <svg width="40" height="40" viewBox="0 0 128 128" fill="none" xmlns="http://www.w3.org/2000/svg">
                  <circle cx="64" cy="64" r="64" fill="#2F3242" />
                  <path
                        d="M51.3954 39.5028C52.3733 39.6812 53.3108 39.033 53.4892 38.055C53.6676 37.0771 53.0194 36.1396 52.0414 35.9612L51.3954 39.5028ZM28.6153 43.5751L30.1748 44.4741L30.1748 44.4741L28.6153 43.5751ZM28.9393 60.9358C29.4332 61.7985 30.5329 62.0976 31.3957 61.6037C32.2585 61.1098 32.5575 60.0101 32.0636 59.1473L28.9393 60.9358ZM37.6935 66.7457C37.025 66.01 35.8866 65.9554 35.1508 66.6239C34.415 67.2924 34.3605 68.4308 35.029 69.1666L37.6935 66.7457ZM53.7489 81.7014L52.8478 83.2597L53.7489 81.7014ZM96.9206 89.515C97.7416 88.9544 97.9526 87.8344 97.3919 87.0135C96.8313 86.1925 95.7113 85.9815 94.8904 86.5422L96.9206 89.515ZM52.0414 35.9612C46.4712 34.9451 41.2848 34.8966 36.9738 35.9376C32.6548 36.9806 29.0841 39.1576 27.0559 42.6762L30.1748 44.4741C31.5693 42.0549 34.1448 40.3243 37.8188 39.4371C41.5009 38.5479 46.1547 38.5468 51.3954 39.5028L52.0414 35.9612ZM27.0559 42.6762C24.043 47.9029 25.2781 54.5399 28.9393 60.9358L32.0636 59.1473C28.6579 53.1977 28.1088 48.0581 30.1748 44.4741L27.0559 42.6762ZM35.029 69.1666C39.6385 74.24 45.7158 79.1355 52.8478 83.2597L54.6499 80.1432C47.8081 76.1868 42.0298 71.5185 37.6935 66.7457L35.029 69.1666ZM52.8478 83.2597C61.344 88.1726 70.0465 91.2445 77.7351 92.3608C85.359 93.4677 92.2744 92.6881 96.9206 89.515L94.8904 86.5422C91.3255 88.9767 85.4902 89.849 78.2524 88.7982C71.0793 87.7567 62.809 84.8612 54.6499 80.1432L52.8478 83.2597ZM105.359 84.9077C105.359 81.4337 102.546 78.6127 99.071 78.6127V82.2127C100.553 82.2127 101.759 83.4166 101.759 84.9077H105.359ZM99.071 78.6127C95.5956 78.6127 92.7831 81.4337 92.7831 84.9077H96.3831C96.3831 83.4166 97.5892 82.2127 99.071 82.2127V78.6127ZM92.7831 84.9077C92.7831 88.3817 95.5956 91.2027 99.071 91.2027V87.6027C97.5892 87.6027 96.3831 86.3988 96.3831 84.9077H92.7831ZM99.071 91.2027C102.546 91.2027 105.359 88.3817 105.359 84.9077H101.759C101.759 86.3988 100.553 87.6027 99.071 87.6027V91.2027Z"
                        fill="#A2ECFB"
                  />
                  <path
                        d="M91.4873 65.382C90.8456 66.1412 90.9409 67.2769 91.7002 67.9186C92.4594 68.5603 93.5951 68.465 94.2368 67.7058L91.4873 65.382ZM99.3169 43.6354L97.7574 44.5344L99.3169 43.6354ZM84.507 35.2412C83.513 35.2282 82.6967 36.0236 82.6838 37.0176C82.6708 38.0116 83.4661 38.8279 84.4602 38.8409L84.507 35.2412ZM74.9407 39.8801C75.9127 39.6716 76.5315 38.7145 76.323 37.7425C76.1144 36.7706 75.1573 36.1517 74.1854 36.3603L74.9407 39.8801ZM53.7836 46.3728L54.6847 47.931L53.7836 46.3728ZM25.5491 80.9047C25.6932 81.8883 26.6074 82.5688 27.5911 82.4247C28.5747 82.2806 29.2552 81.3664 29.1111 80.3828L25.5491 80.9047ZM94.2368 67.7058C97.8838 63.3907 100.505 58.927 101.752 54.678C103.001 50.4213 102.9 46.2472 100.876 42.7365L97.7574 44.5344C99.1494 46.9491 99.3603 50.0419 98.2974 53.6644C97.2323 57.2945 94.9184 61.3223 91.4873 65.382L94.2368 67.7058ZM100.876 42.7365C97.9119 37.5938 91.7082 35.335 84.507 35.2412L84.4602 38.8409C91.1328 38.9278 95.7262 41.0106 97.7574 44.5344L100.876 42.7365ZM74.1854 36.3603C67.4362 37.8086 60.0878 40.648 52.8826 44.8146L54.6847 47.931C61.5972 43.9338 68.5948 41.2419 74.9407 39.8801L74.1854 36.3603ZM52.8826 44.8146C44.1366 49.872 36.9669 56.0954 32.1491 62.3927C27.3774 68.63 24.7148 75.2115 25.5491 80.9047L29.1111 80.3828C28.4839 76.1026 30.4747 70.5062 35.0084 64.5802C39.496 58.7143 46.2839 52.7889 54.6847 47.931L52.8826 44.8146Z"
                        fill="#A2ECFB"
                  />
                  <path
                        d="M49.0825 87.2295C48.7478 86.2934 47.7176 85.8059 46.7816 86.1406C45.8455 86.4753 45.358 87.5055 45.6927 88.4416L49.0825 87.2295ZM78.5635 96.4256C79.075 95.5732 78.7988 94.4675 77.9464 93.9559C77.0941 93.4443 75.9884 93.7205 75.4768 94.5729L78.5635 96.4256ZM79.5703 85.1795C79.2738 86.1284 79.8027 87.1379 80.7516 87.4344C81.7004 87.7308 82.71 87.2019 83.0064 86.2531L79.5703 85.1795ZM84.3832 64.0673H82.5832H84.3832ZM69.156 22.5301C68.2477 22.1261 67.1838 22.535 66.7799 23.4433C66.3759 24.3517 66.7848 25.4155 67.6931 25.8194L69.156 22.5301ZM45.6927 88.4416C47.5994 93.7741 50.1496 98.2905 53.2032 101.505C56.2623 104.724 59.9279 106.731 63.9835 106.731V103.131C61.1984 103.131 58.4165 101.765 55.8131 99.0249C53.2042 96.279 50.8768 92.2477 49.0825 87.2295L45.6927 88.4416ZM63.9835 106.731C69.8694 106.731 74.8921 102.542 78.5635 96.4256L75.4768 94.5729C72.0781 100.235 68.0122 103.131 63.9835 103.131V106.731ZM83.0064 86.2531C85.0269 79.7864 86.1832 72.1831 86.1832 64.0673H82.5832C82.5832 71.8536 81.4723 79.0919 79.5703 85.1795L83.0064 86.2531ZM86.1832 64.0673C86.1832 54.1144 84.4439 44.922 81.4961 37.6502C78.5748 30.4436 74.3436 24.8371 69.156 22.5301L67.6931 25.8194C71.6364 27.5731 75.3846 32.1564 78.1598 39.0026C80.9086 45.7836 82.5832 54.507 82.5832 64.0673H86.1832Z"
                        fill="#A2ECFB"
                  />
                  <path
                        fillRule="evenodd"
                        clipRule="evenodd"
                        d="M103.559 84.9077C103.559 82.4252 101.55 80.4127 99.071 80.4127C96.5924 80.4127 94.5831 82.4252 94.5831 84.9077C94.5831 87.3902 96.5924 89.4027 99.071 89.4027C101.55 89.4027 103.559 87.3902 103.559 84.9077V84.9077Z"
                        stroke="#A2ECFB"
                        strokeWidth="3.6"
                        strokeLinecap="round"
                  />
                  <path
                        fillRule="evenodd"
                        clipRule="evenodd"
                        d="M28.8143 89.4027C31.2929 89.4027 33.3023 87.3902 33.3023 84.9077C33.3023 82.4252 31.2929 80.4127 28.8143 80.4127C26.3357 80.4127 24.3264 82.4252 24.3264 84.9077C24.3264 87.3902 26.3357 89.4027 28.8143 89.4027V89.4027V89.4027Z"
                        stroke="#A2ECFB"
                        strokeWidth="3.6"
                        strokeLinecap="round"
                  />
                  <ellipse
                        cx="63.9835"
                        cy="23.2036"
                        rx="4.48794"
                        ry="4.495"
                        stroke="#A2ECFB"
                        strokeWidth="3.6"
                        strokeLinecap="round"
                  />
                  <path
                        fillRule="evenodd"
                        clipRule="evenodd"
                        d="M64.8501 68.0857C62.6341 68.5652 60.451 67.1547 59.9713 64.9353C59.4934 62.7159 60.9007 60.5293 63.1167 60.0489C65.3326 59.5693 67.5157 60.9798 67.9954 63.1992C68.4742 65.4186 67.066 67.6052 64.8501 68.0857Z"
                        fill="#A2ECFB"
                  />
            </svg>
      ),
      springboot: () => (
            <svg width="40" height="40" viewBox="0 0 157.8 141.6" xmlns="http://www.w3.org/2000/svg">
                  <path
                        fill="#6DB33F"
                        d="M153.4,62.6l-30.2-52.3c-2.6-4.5-9.1-8.3-14.3-8.3H48.5c-5.2,0-11.7,3.7-14.3,8.3L4,62.6
                        c-2.6,4.5-2.6,12,0,16.5l30.2,52.3c2.6,4.5,9.1,8.3,14.3,8.3h60.4c5.2,0,11.7-3.7,14.3-8.3l30.2-52.3
                        C156.1,74.5,156.1,67.1,153.4,62.6z"
                  />
                  <circle fill="#FFFFFF" cx="36.7" cy="115.2" r="6.1" />
                  <path
                        fill="#FFFFFF"
                        d="M139,97.4C121.3,121,83.5,113,59.3,114.2c0,0-4.3,0.2-8.6,0.9c0,0,1.6-0.7,3.7-1.4c17-5.9,25-7.1,35.4-12.4
                        c19.4-9.9,38.7-31.6,42.7-54.1c-7.4,21.6-29.9,40.3-50.3,47.8c-14,5.2-39.3,10.2-39.3,10.2l-1-0.5C24.5,96.4,24,59,55.3,47
                        C69,41.7,82.2,44.6,97,41.1c15.8-3.8,34.1-15.6,41.6-31.1C146.9,34.8,156.9,73.5,139,97.4z"
                  />
                  <path
                        fill="#6DB33F"
                        d="M138.6,10c8.3,24.8,18.4,63.5,0.4,87.4c-11.1,14.8-30.1,17.2-48.7,17.2c-8.8,0-17.5-0.5-25.2-0.5
                        c-2,0-3.9,0-5.7,0.1c0,0-4.3,0.2-8.6,0.9c0,0,1.6-0.7,3.7-1.4c17-5.9,25-7.1,35.4-12.4c19.4-9.9,38.7-31.6,42.7-54.1
                        c-7.4,21.6-29.9,40.3-50.3,47.8c-14,5.2-39.3,10.2-39.3,10.2l0,0l-1-0.5C24.5,96.4,24,59,55.3,47C69,41.7,82.2,44.6,97,41.1
                        C112.8,37.4,131.1,25.5,138.6,10 M139.1,2.1l-3.2,6.6c-7.5,15.6-25.8,26.2-39.6,29.5C90.1,39.7,84,40,78.2,40.3
                        c-7.7,0.4-15.7,0.8-23.9,3.9C35,51.6,27.6,67.8,27.1,80.5c-0.5,12.1,4.7,22.6,13.2,26.9c0.5,0.3,1.6,0.9,2.5,0.9h1.3l0.2-0.2
                        c5.8-1.2,26.5-5.6,38.9-10.1c8.6-3.2,18.3-8.6,27.1-15.8c-6.5,6.9-14.1,12.7-21.8,16.6c-6.3,3.2-11.7,4.9-19.2,7.2
                        c-4.4,1.3-9.5,2.9-15.7,5c-2.2,0.7-3.8,1.5-3.9,1.5l-2.2,4.5l3.9,1.2c4.1-0.7,8.2-0.9,8.3-0.9c1.7-0.1,3.5-0.1,5.5-0.1
                        c3.7,0,7.6,0.1,11.7,0.3c4.4,0.1,8.9,0.3,13.5,0.3c18.5,0,39-2.2,51.1-18.4c14.1-18.8,14.2-48.3,0.1-90.2L139.1,2.1L139.1,2.1z"
                  />
            </svg>
      ),
      ai: () => (
            <svg width="40" height="40" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                  <path fill="#10B981" d="M12 2L2 7l10 5 10-5-10-5zM2 17l10 5 10-5M2 12l10 5 10-5" />
            </svg>
      ),
};

const CreativeSection = () => {
      const sectionRef = useRef<HTMLDivElement>(null);
      const containerRef = useRef<HTMLDivElement>(null);
      const titleRef = useRef<HTMLHeadingElement>(null);
      const subtitleRef = useRef<HTMLParagraphElement>(null);
      const descriptionRef = useRef<HTMLDivElement>(null);
      const buttonRef = useRef<HTMLDivElement>(null);
      const techStackRef = useRef<HTMLDivElement>(null);
      // 存储ScrollTrigger实例，用于清理
      const scrollTriggers = useRef<ScrollTrigger[]>([]);
      // 组件挂载状态标记
      const isMounted = useRef(true);

      useEffect(() => {
            // 容器入场动画
            if (containerRef.current) {
                  const containerTrigger = ScrollTrigger.create({
                        trigger: containerRef.current,
                        start: 'top 80%',
                  });
                  
                  // eslint-disable-next-line @typescript-eslint/no-unused-vars
                  const containerAnim = gsap.fromTo(
                        containerRef.current,
                        { y: 50, opacity: 0 },
                        {
                              y: 0,
                              opacity: 1,
                              duration: 0.8,
                              ease: 'power2.out',
                              scrollTrigger: containerTrigger,
                        },
                  );
                  
                  scrollTriggers.current.push(containerTrigger);
            }

            // 标题动画
            if (titleRef.current) {
                  const titleTrigger = ScrollTrigger.create({
                        trigger: titleRef.current,
                        start: 'top 85%',
                        toggleActions: "play none none none", // 只执行一次
                  });
                  
                  // eslint-disable-next-line @typescript-eslint/no-unused-vars
                  const titleAnim = gsap.fromTo(
                        titleRef.current,
                        { y: 50, opacity: 0 },
                        {
                              y: 0,
                              opacity: 1,
                              duration: 1,
                              ease: 'power3.out',
                              scrollTrigger: titleTrigger,
                        },
                  );
                  
                  scrollTriggers.current.push(titleTrigger);
            }

            // 副标题动画
            if (subtitleRef.current) {
                  const subtitleTrigger = ScrollTrigger.create({
                        trigger: subtitleRef.current,
                        start: 'top 85%',
                        toggleActions: "play none none none", // 只执行一次
                  });
                  
                  // eslint-disable-next-line @typescript-eslint/no-unused-vars
                  const subtitleAnim = gsap.fromTo(
                        subtitleRef.current,
                        { y: 30, opacity: 0 },
                        {
                              y: 0,
                              opacity: 1,
                              duration: 0.8,
                              delay: 0.3,
                              ease: 'power2.out',
                              scrollTrigger: subtitleTrigger,
                        },
                  );
                  
                  scrollTriggers.current.push(subtitleTrigger);
            }

            // 描述文字动画
            if (descriptionRef.current) {
                  const paragraphs = descriptionRef.current.querySelectorAll('p');
                  const descriptionTrigger = ScrollTrigger.create({
                        trigger: descriptionRef.current,
                        start: 'top 85%',
                        toggleActions: "play none none none", // 只执行一次
                  });
                  
                  // eslint-disable-next-line @typescript-eslint/no-unused-vars
                  const descriptionAnim = gsap.fromTo(
                        paragraphs,
                        { y: 30, opacity: 0 },
                        {
                              y: 0,
                              opacity: 1,
                              stagger: 0.2,
                              duration: 0.8,
                              delay: 0.5,
                              ease: 'power2.out',
                              scrollTrigger: descriptionTrigger,
                        },
                  );
                  
                  scrollTriggers.current.push(descriptionTrigger);
            }

            // 技术栈动画
            if (techStackRef.current) {
                  const icons = techStackRef.current.querySelectorAll('.tech-icon');
                  const techTrigger = ScrollTrigger.create({
                        trigger: techStackRef.current,
                        start: 'top 85%',
                        toggleActions: "play none none none", // 只执行一次
                  });
                  
                  // eslint-disable-next-line @typescript-eslint/no-unused-vars
                  const techAnim = gsap.fromTo(
                        icons,
                        { y: 30, opacity: 0, scale: 0.8 },
                        {
                              y: 0,
                              opacity: 1,
                              scale: 1,
                              stagger: 0.1,
                              duration: 0.6,
                              delay: 0.8,
                              ease: 'back.out(1.7)',
                              scrollTrigger: techTrigger,
                        },
                  );
                  
                  scrollTriggers.current.push(techTrigger);
            }

            // 按钮动画
            if (buttonRef.current) {
                  const buttonTrigger = ScrollTrigger.create({
                        trigger: buttonRef.current,
                        start: 'top 90%',
                        toggleActions: "play none none none", // 只执行一次
                  });
                  
                  // eslint-disable-next-line @typescript-eslint/no-unused-vars
                  const buttonAnim = gsap.fromTo(
                        buttonRef.current,
                        { opacity: 0, y: 10 },
                        {
                              opacity: 1,
                              y: 0,
                              duration: 0.6,
                              delay: 1.5,
                              ease: 'power2.out',
                              scrollTrigger: buttonTrigger,
                        },
                  );
                  
                  scrollTriggers.current.push(buttonTrigger);
            }

            return () => {
                  // 标记组件已卸载
                  isMounted.current = false;
                  
                  // 正确清理所有ScrollTrigger实例
                  scrollTriggers.current.forEach(trigger => {
                        if (trigger) trigger.kill();
                  });
                  scrollTriggers.current = [];
                  
                  // 刷新其余的ScrollTrigger
                  ScrollTrigger.refresh();
            };
      }, []);

      return (
            <>
                  <section
                        id="creative"
                        ref={sectionRef}
                        className="relative py-24 md:py-32 px-4 flex items-center justify-center min-h-screen overflow-hidden bg-black dark:bg-black"
                  >
                        {/* 主要内容 */}
                        <div ref={containerRef} className="container mx-auto max-w-6xl z-10">
                              <div className="flex flex-col items-center justify-center text-center space-y-12">
                                    {/* 标题 */}
                                    <h2
                                          ref={titleRef}
                                          className="text-4xl md:text-5xl lg:text-6xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-blue-300 to-violet-300"
                                    >
                                          年轻，敢想，敢创
                                    </h2>

                                    {/* 副标题 */}
                                    <p
                                          ref={subtitleRef}
                                          className="text-xl md:text-2xl font-medium text-gray-300 italic font-family-[--font-beatrice-display]"
                                    >
                                          Be Young, Be Creative, Be Bold
                                    </p>

                                    {/* GridDistortion 区域 */}
                                    <div className="flex items-center justify-center w-full h-[400px] relative rounded-3xl overflow-hidden my-12 mx-auto">
                                          <GridDistortion
                                                imageSrc="/bg/background.jpg"
                                                grid={10}
                                                mouse={0.1}
                                                strength={0.15}
                                                relaxation={0.9}
                                                className="w-full h-full"
                                          />

                                          {/* TextPressure 组件 */}
                                          <div className="absolute inset-0 flex items-center justify-center">
                                                <div className="w-full h-full flex items-center justify-center">
                                                      <TextPressure
                                                            text="Creators"
                                                            fontFamily="Compressa VF"
                                                            fontUrl="https://res.cloudinary.com/dr6lvwubh/raw/upload/v1529908256/CompressaPRO-GX.woff2"
                                                            width={true}
                                                            weight={true}
                                                            italic={true}
                                                            alpha={false}
                                                            flex={true}
                                                            stroke={true}
                                                            scale={true}
                                                            textColor="#FFFFFF"
                                                            strokeColor="#3B82F6"
                                                            strokeWidth={2}
                                                            className="w-full h-full"
                                                            minFontSize={48}
                                                      />
                                                </div>
                                          </div>
                                    </div>

                                    {/* 描述内容 */}
                                    <div
                                          ref={descriptionRef}
                                          className="space-y-6 text-md md:text-lg text-gray-300 max-w-2xl"
                                    >
                                          <p>
                                                我们是一群充满激情和创造力的年轻人，致力于用科技和创新改变世界。在无限创作工作室，我们相信每个想法都有实现的可能。
                                          </p>
                                          <p>
                                                从前端到后端，从移动应用到桌面软件，我们精通各种技术栈，包括Vue3、React、Next.js、Django、Tauri、Electron和SpringBoot。但技术只是工具，真正驱动我们的是通过AI和前沿技术解决实际问题的热情。
                                          </p>
                                          <p>加入我们，一起探索无限可能，让创意照亮未来。</p>
                                    </div>

                                    {/* 技术栈展示 */}
                                    <div ref={techStackRef} className="flex flex-wrap justify-center gap-8 mt-8">
                                          {Object.entries(TechIcons).map(([key, Icon]) => (
                                                <div
                                                      key={key}
                                                      className="tech-icon bg-white/10 p-4 rounded-xl backdrop-blur-sm hover:bg-white/20 transition-all duration-300"
                                                >
                                                      <Icon />
                                                </div>
                                          ))}
                                    </div>

                                    {/* 按钮 */}
                                    <div ref={buttonRef} className="mt-6">
                                          <Button
                                                size="lg"
                                                className="bg-gradient-to-r from-blue-600 to-violet-600 hover:from-blue-700 hover:to-violet-700 text-white rounded-full w-24 h-24 p-0 flex items-center justify-center text-lg group"
                                                onClick={() => window.open('/about', '_self')}
                                          >
                                                <Magnet magnetStrength={1.5} className="inline-block">
                                                      <ArrowRight className="h-8 w-8 transition-transform group-hover:translate-x-1" />
                                                </Magnet>
                                          </Button>
                                    </div>
                              </div>
                        </div>
                  </section>
            </>
      );
};

export default CreativeSection;
